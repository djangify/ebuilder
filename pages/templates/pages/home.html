{% extends "base.html" %}
{% load instance_utils %}

{% block extra_head %}
<link rel="canonical" href="{{ site_url }}">

<!-- Open Graph -->
{% include "includes/seo/og_meta.html" with 
    og_title=site_name
    og_description=site_settings.default_meta_description
%}

<!-- WebPage Schema -->
{% include "includes/seo/schema_webpage.html" %}

<!-- Organization Schema -->
{% include "includes/seo/schema_organization.html" %}
{% endblock %}

{% block content %}
{% if hero %}
    {% include "pages/sections/hero.html" %}
{% endif %}

<!-- PAGE SECTIONS (dynamic sections from PageSection model) -->
{% for block in content_blocks %}

        {% if block|is_pagesection %}
            {% include "pages/sections/"|add:block.section_type|add:".html" with section=block %}
        {% elif block|is_threecolumn %}
            {% include "pages/sections/content_blocks.html" with block=block %}
        {% elif block|is_faqblock %}
            {% include "pages/sections/faq_block.html" with block=block %}
        {% elif block.images %}
            {% include "pages/sections/gallery.html" with gallery_items=block.images.all %}
        {% endif %}
    {% endfor %}

    {% if featured_products %}
        {% include "pages/sections/featured_products.html" %}
    {% endif %}

    {% if blog_posts %}
        {% include "pages/sections/blog_posts.html" %}
    {% endif %}

{% endblock %}