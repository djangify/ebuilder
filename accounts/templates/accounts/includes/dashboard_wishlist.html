{% if favourite_products %}
{% load currency_tags %}

<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 mt-6">
  {% for product in favourite_products %}
  <article class="bg-white border border-[color:var(--color-primary) rounded-lg overflow-hidden shadow-sm hover:shadow-md transition flex flex-col">
    
    <!-- Product Image -->
    <a href="{% url 'shop:product_detail' product.slug %}">
      {% if product.get_image_url %}
        <img src="{{ product.get_image_url }}" 
             alt="{{ product.title }}" 
             class="w-full h-64 object-cover">
      {% else %}
        <div class="w-full h-64 bg-[color:var(--color-light)] flex items-center justify-center text-[color:var(--color-accent)]">
          No Image Available
        </div>
      {% endif %}
    </a>

    <!-- Product Content -->
    <div class="p-5 flex flex-col flex-grow">
      <h3 class="text-lg font-semibold text-[color:var(--color-primary)] mb-2 line-clamp-2">
        {{ product.title }}
      </h3>

      <p class="text-[color:var(--color-font-main)] text-sm mb-4">
        {{ product.current_price|default:product.price|currency }}
      </p>

      <div class="mt-auto flex justify-center">
        <a href="{% url 'shop:product_detail' product.slug %}"
           class="px-4 py-2 text-sm font-semibold border border-[color:var(--color-accent)] text-[color:var(--color-accent)] rounded-md hover:bg-[color:var(--color-primary)] hover:text-white transition">
          View
        </a>
        

      </div>
      <form
          method="post"
          action="{% url 'shop:remove_from_wishlist' product.id %}"
          class="mt-2 flex justify-center">
          {% csrf_token %}
          <button
            type="submit"
            class="text-sm text-red-600 hover:underline">
            Remove
          </button>
        </form>
    </div>

  </article>
  {% endfor %}
</div>
{% else %}
<div class="text-center py-12">
  <p class="text-[color:var(--color-font-main)]">No products in your wish list yet.</p>
  <a href="{% url 'shop:product_list' %}" 
     class="mt-4 inline-block px-6 py-3 rounded-lg bg-[color:var(--color-primary)] text-white font-semibold hover:bg-[color:var(--color-secondary)] hover:text-[color:var(--color-primary)] transition">
    Visit the Shop
  </a>
</div>
{% endif %}
